<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />

    <title>AJAX</title>
  </head>
  <body>
    <h1>Hello, world!</h1>

    <button type="button" id="fetch" class="btn btn-primary">fetch</button>
    <button type="button" id="second" class="btn btn-secondary">
      Secondary
    </button>

    <div class="container">
      <h1>Employee list</h1>
      <ul id="list"></ul>
    </div>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    -->

    <script>
      //It is a set of technology including asynchronous javascript and XML
      //   modern website use json to fethch data
      //in old time we se Xml to do that

      //why we use//
      //   save bandwith
      //no page relod fetch data without reloading all page
      //pure javascript is called vannila javascript
      //it use xml http request which are methods and its also called xhr

      const ajax = document.getElementById("fetch");
      ajax.addEventListener("click", dothis);

      const scnd = document.getElementById("second");
      scnd.addEventListener("click", popdata);
      function popdata() {
        console.log("clicked pop");

        const xhr = new XMLHttpRequest();
        xhr.open(
          "GET",
          "http://dummy.restapiexample.com/api/v1/employee/1",
          true
        );

        xhr.onload = function () {
          if ((status = 200)) {
            let hrt = JSON.parse(this.responseText);
            console.log(hrt);
            let lst = document.getElementById("list");
            str = "";
            for (key in hrt) {
              str += `<li>${hrt[key].employee_name}<li>`;
            }
            list.innerHTML = str;
          } else "some error occured";
        };

        xhr.send();
      }

      function dothis() {
        console.log("clicked");
        const xhr = new XMLHttpRequest();
        // xhr.open("GET", "https://jsonplaceholder.typicode.com/todos/1", true);
        xhr.open("POST", "http://dummy.restapiexample.com/api/v1/create", true);

        xhr.getResponseHeader(" Content - type", "application/json");
        xhr.onprogress = function ali() {
          console.log("hi my friend");
        };

        xhr.onreadystatechange = function () {
          console.log("the state", xhr.readyState);
        };

        xhr.onload = function () {
          if ((status = 200)) {
            console.log(this.responseText);
          } else "some error occured";
        };
        param = { name: "fffsdcstest", salary: "122", age: "29" };
        xhr.send(param);
      }
    </script>
  </body>
</html>
